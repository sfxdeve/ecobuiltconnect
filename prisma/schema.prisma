generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

enum CategoryStatus {
  REQUESTED
  APPROVED
  REJECTED
}

model Category {
  id String @id @default(uuid())

  name      String
  status    CategoryStatus @default(REQUESTED)
  isDeleted Boolean        @default(false) @map("is_deleted")

  products Product[]

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
}

enum ProductCondition {
  EXCELLENT
  GOOD
  FAIR
}

model Product {
  id String @id @default(uuid())

  pictureIds    String[]         @map("picture_ids")
  name          String
  description   String
  previousUsage String?          @map("previous_usage")
  sku           String           @unique
  stock         Int
  price         Float
  salePrice     Float?           @map("sale_price")
  condition     ProductCondition @default(GOOD)
  isVerified    Boolean          @default(false) @map("is_ecobuilt_verified")
  isDeleted     Boolean          @default(false) @map("is_deleted")

  categoryId String   @map("category_id")
  category   Category @relation(fields: [categoryId], references: [id], onDelete: Restrict, onUpdate: Cascade)

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @default(now()) @updatedAt @map("updated_at")
}
